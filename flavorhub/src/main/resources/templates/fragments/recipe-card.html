<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Recipe Card Fragment</title>
</head>
<body>
    <!-- 
        Recipe Card Fragment
        
        Reusable Thymeleaf fragment for displaying a recipe card with image, title, and metadata.
        
        Usage:
        <div th:replace="fragments/recipe-card :: recipe-card(recipe=${recipe})"></div>
        
        Parameters:
        - recipe: Recipe object with properties (id, name, description, prepTime, cookTime, 
                  servings, difficultyLevel, cuisineType, imageUrl)
    -->
    <div th:fragment="recipe-card(recipe)" class="recipe-card" 
         th:attr="aria-label='Recipe card for ' + ${recipe.name}">
        <style>
            .recipe-card {
                background: #f8f9fa;
                border-radius: 8px;
                overflow: hidden;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                transition: transform 0.2s, box-shadow 0.2s;
                display: flex;
                flex-direction: column;
                height: 100%;
            }
            
            .recipe-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            }
            
            .recipe-card-image {
                width: 100%;
                height: 200px;
                object-fit: cover;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                display: block;
            }
            
            .recipe-card-image-placeholder {
                width: 100%;
                height: 200px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 3em;
            }
            
            .recipe-card-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 20px;
            }
            
            .recipe-card-header h3 {
                margin: 0 0 5px 0;
                font-size: 1.3em;
                line-height: 1.3;
            }
            
            .recipe-card-cuisine {
                font-size: 0.9em;
                opacity: 0.9;
                display: inline-block;
                margin-top: 5px;
            }
            
            .recipe-card-body {
                padding: 20px;
                flex: 1;
                display: flex;
                flex-direction: column;
            }
            
            .recipe-card-meta {
                display: flex;
                justify-content: space-between;
                margin-bottom: 15px;
                font-size: 0.9em;
                color: #666;
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .recipe-card-meta span {
                display: flex;
                align-items: center;
                gap: 5px;
                white-space: nowrap;
            }
            
            .recipe-card-description {
                color: #666;
                margin-bottom: 15px;
                line-height: 1.5;
                flex: 1;
                overflow: hidden;
                text-overflow: ellipsis;
                display: -webkit-box;
                -webkit-line-clamp: 3;
                line-clamp: 3;
                -webkit-box-orient: vertical;
            }
            
            .recipe-card-footer {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-top: auto;
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .recipe-card-servings {
                color: #667eea;
                font-weight: 500;
            }
            
            .recipe-card-difficulty {
                display: inline-block;
                padding: 3px 10px;
                border-radius: 12px;
                font-size: 0.85em;
                font-weight: 500;
            }
            
            .recipe-card-difficulty.easy { 
                background: #d4edda; 
                color: #155724; 
            }
            
            .recipe-card-difficulty.medium { 
                background: #fff3cd; 
                color: #856404; 
            }
            
            .recipe-card-difficulty.hard { 
                background: #f8d7da; 
                color: #721c24; 
            }
            
            /* Colorful cuisine badges */
            .cuisine-badge {
                display: inline-block;
                padding: 6px 14px;
                border-radius: 20px;
                font-size: 0.9em;
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                box-shadow: 0 2px 6px rgba(0,0,0,0.12);
                transition: transform 0.2s, box-shadow 0.2s;
            }
            
            .cuisine-badge:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 10px rgba(0,0,0,0.18);
            }
            
            /* Cuisine-specific colors */
            .cuisine-italian { background: linear-gradient(135deg, #00c853 0%, #64dd17 100%); color: white; }
            .cuisine-mexican { background: linear-gradient(135deg, #ff6f00 0%, #ff9100 100%); color: white; }
            .cuisine-chinese { background: linear-gradient(135deg, #d50000 0%, #ff1744 100%); color: white; }
            .cuisine-japanese { background: linear-gradient(135deg, #e91e63 0%, #f50057 100%); color: white; }
            .cuisine-indian { background: linear-gradient(135deg, #ff6f00 0%, #ffa726 100%); color: white; }
            .cuisine-thai { background: linear-gradient(135deg, #aa00ff 0%, #d500f9 100%); color: white; }
            .cuisine-french { background: linear-gradient(135deg, #304ffe 0%, #536dfe 100%); color: white; }
            .cuisine-greek { background: linear-gradient(135deg, #00b8d4 0%, #00e5ff 100%); color: white; }
            .cuisine-american { background: linear-gradient(135deg, #c62828 0%, #ef5350 100%); color: white; }
            .cuisine-mediterranean { background: linear-gradient(135deg, #00897b 0%, #26a69a 100%); color: white; }
            .cuisine-korean { background: linear-gradient(135deg, #6a1b9a 0%, #8e24aa 100%); color: white; }
            .cuisine-vietnamese { background: linear-gradient(135deg, #f57c00 0%, #fb8c00 100%); color: white; }
            .cuisine-middle { background: linear-gradient(135deg, #d84315 0%, #f4511e 100%); color: white; }
            .cuisine-spanish { background: linear-gradient(135deg, #fdd835 0%, #ffeb3b 100%); color: #333; }
            .cuisine-default { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
            
            .recipe-card-view-link {
                padding: 10px 20px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                text-decoration: none;
                border-radius: 25px;
                transition: all 0.3s ease;
                display: inline-block;
                margin-top: 10px;
                width: 100%;
                text-align: center;
                font-weight: 600;
                box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            }
            
            .recipe-card-view-link:hover {
                background: linear-gradient(135deg, #5568d3 0%, #6a3d94 100%);
                transform: translateY(-2px);
                box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
            }
            
            /* Responsive adjustments */
            @media (max-width: 768px) {
                .recipe-card-meta {
                    flex-direction: column;
                    gap: 5px;
                }
                
                .recipe-card-footer {
                    flex-direction: column;
                    align-items: flex-start;
                }
            }
        </style>
        
        <!-- Recipe Image or Placeholder -->
        <div th:if="${recipe.imageUrl != null and !recipe.imageUrl.isEmpty()}">
            <img th:src="${recipe.imageUrl}" 
                 th:alt="'Photo of ' + ${recipe.name}" 
                 class="recipe-card-image"
                 loading="lazy" />
        </div>
        <div th:unless="${recipe.imageUrl != null and !recipe.imageUrl.isEmpty()}" 
             class="recipe-card-image-placeholder"
             th:attr="aria-label='No image available for ' + ${recipe.name}">
            üç≥
        </div>
        
        <!-- Recipe Header -->
        <div class="recipe-card-header">
            <h3 th:text="${recipe.name}">Recipe Name</h3>
            <span class="cuisine-badge" 
                  th:if="${recipe.cuisineType != null and !recipe.cuisineType.isEmpty()}"
                  th:classappend="${'cuisine-' + #strings.toLowerCase(#strings.replace(recipe.cuisineType, ' ', '-'))}"
                  th:text="${recipe.cuisineType}">Cuisine Type</span>
            <span class="cuisine-badge cuisine-default" 
                  th:unless="${recipe.cuisineType != null and !recipe.cuisineType.isEmpty()}">Unknown</span>
        </div>
        
        <!-- Recipe Body -->
        <div class="recipe-card-body">
            <!-- Preparation and Cook Time Metadata -->
            <div class="recipe-card-meta">
                <span th:attr="aria-label='Preparation time: ' + ${recipe.prepTime} + ' minutes'">
                    ‚è±Ô∏è <span th:text="${recipe.prepTime != null ? recipe.prepTime : 0}">0</span> min prep
                </span>
                <span th:attr="aria-label='Cook time: ' + ${recipe.cookTime} + ' minutes'">
                    üç≥ <span th:text="${recipe.cookTime != null ? recipe.cookTime : 0}">0</span> min cook
                </span>
            </div>
            
            <!-- Recipe Description -->
            <div class="recipe-card-description" 
                 th:if="${recipe.description != null and !recipe.description.isEmpty()}"
                 th:text="${recipe.description}">
                Recipe description goes here
            </div>
            <div class="recipe-card-description" 
                 th:unless="${recipe.description != null and !recipe.description.isEmpty()}">
                No description available
            </div>
            
            <!-- Recipe Footer with Servings and Difficulty -->
            <div class="recipe-card-footer">
                <span class="recipe-card-servings" 
                      th:attr="aria-label='Serves ' + ${recipe.servings} + ' people'">
                    üçΩÔ∏è Serves <span th:text="${recipe.servings != null ? recipe.servings : 0}">0</span>
                </span>
                <span class="recipe-card-difficulty" 
                      th:if="${recipe.difficultyLevel != null and !recipe.difficultyLevel.isEmpty()}"
                      th:classappend="${recipe.difficultyLevel != null ? recipe.difficultyLevel.toLowerCase() : ''}"
                      th:text="${recipe.difficultyLevel}"
                      th:attr="aria-label='Difficulty level: ' + ${recipe.difficultyLevel}">
                    Difficulty
                </span>
            </div>
            
            <!-- View Recipe Link -->
            <a th:href="@{/recipes/{id}(id=${recipe.id})}" 
               class="recipe-card-view-link"
               th:attr="aria-label='View full recipe for ' + ${recipe.name}">
                View Recipe
            </a>
        </div>
    </div>
</body>
</html>
