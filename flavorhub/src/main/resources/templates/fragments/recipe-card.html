<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Recipe Card Fragment</title>
</head>
<body>
    <!-- 
        Recipe Card Fragment
        
        Reusable Thymeleaf fragment for displaying a recipe card with image, title, and metadata.
        
        Usage:
        <div th:replace="fragments/recipe-card :: recipe-card(recipe=${recipe})"></div>
        
        Parameters:
        - recipe: Recipe object with properties (id, name, description, prepTime, cookTime, 
                  servings, difficultyLevel, cuisineType, imageUrl)
    -->
    <div th:fragment="recipe-card(recipe)" class="recipe-card" 
         th:attr="aria-label='Recipe card for ' + ${recipe.name}">
        <style>
            .recipe-card {
                background: #f8f9fa;
                border-radius: 8px;
                overflow: hidden;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                transition: transform 0.2s, box-shadow 0.2s;
                display: flex;
                flex-direction: column;
                height: 100%;
            }
            
            .recipe-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            }
            
            .recipe-card-image {
                width: 100%;
                height: 200px;
                object-fit: cover;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                display: block;
            }
            
            .recipe-card-image-placeholder {
                width: 100%;
                height: 200px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 3em;
            }
            
            .recipe-card-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 20px;
            }
            
            .recipe-card-header h3 {
                margin: 0 0 5px 0;
                font-size: 1.3em;
                line-height: 1.3;
            }
            
            .recipe-card-cuisine {
                font-size: 0.9em;
                opacity: 0.9;
                display: inline-block;
                margin-top: 5px;
            }
            
            .recipe-card-body {
                padding: 20px;
                flex: 1;
                display: flex;
                flex-direction: column;
            }
            
            .recipe-card-meta {
                display: flex;
                justify-content: space-between;
                margin-bottom: 15px;
                font-size: 0.9em;
                color: #666;
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .recipe-card-meta span {
                display: flex;
                align-items: center;
                gap: 5px;
                white-space: nowrap;
            }
            
            .recipe-card-description {
                color: #666;
                margin-bottom: 15px;
                line-height: 1.5;
                flex: 1;
                overflow: hidden;
                text-overflow: ellipsis;
                display: -webkit-box;
                -webkit-line-clamp: 3;
                -webkit-box-orient: vertical;
            }
            
            .recipe-card-footer {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-top: auto;
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .recipe-card-servings {
                color: #667eea;
                font-weight: 500;
            }
            
            .recipe-card-difficulty {
                display: inline-block;
                padding: 3px 10px;
                border-radius: 12px;
                font-size: 0.85em;
                font-weight: 500;
            }
            
            .recipe-card-difficulty.easy { 
                background: #d4edda; 
                color: #155724; 
            }
            
            .recipe-card-difficulty.medium { 
                background: #fff3cd; 
                color: #856404; 
            }
            
            .recipe-card-difficulty.hard { 
                background: #f8d7da; 
                color: #721c24; 
            }
            
            .recipe-card-view-link {
                padding: 8px 16px;
                background: #667eea;
                color: white;
                text-decoration: none;
                border-radius: 5px;
                transition: background 0.3s;
                display: inline-block;
                margin-top: 10px;
                width: 100%;
                text-align: center;
            }
            
            .recipe-card-view-link:hover {
                background: #5568d3;
            }
            
            /* Responsive adjustments */
            @media (max-width: 768px) {
                .recipe-card-meta {
                    flex-direction: column;
                    gap: 5px;
                }
                
                .recipe-card-footer {
                    flex-direction: column;
                    align-items: flex-start;
                }
            }
        </style>
        
        <!-- Recipe Image or Placeholder -->
        <div th:if="${recipe.imageUrl != null and !recipe.imageUrl.isEmpty()}">
            <img th:src="${recipe.imageUrl}" 
                 th:alt="'Photo of ' + ${recipe.name}" 
                 class="recipe-card-image"
                 loading="lazy" />
        </div>
        <div th:unless="${recipe.imageUrl != null and !recipe.imageUrl.isEmpty()}" 
             class="recipe-card-image-placeholder"
             th:attr="aria-label='No image available for ' + ${recipe.name}">
            üç≥
        </div>
        
        <!-- Recipe Header -->
        <div class="recipe-card-header">
            <h3 th:text="${recipe.name}">Recipe Name</h3>
            <span class="recipe-card-cuisine" 
                  th:if="${recipe.cuisineType != null and !recipe.cuisineType.isEmpty()}"
                  th:text="${recipe.cuisineType}">Cuisine Type</span>
        </div>
        
        <!-- Recipe Body -->
        <div class="recipe-card-body">
            <!-- Preparation and Cook Time Metadata -->
            <div class="recipe-card-meta">
                <span th:attr="aria-label='Preparation time: ' + ${recipe.prepTime} + ' minutes'">
                    ‚è±Ô∏è <span th:text="${recipe.prepTime != null ? recipe.prepTime : 0}">0</span> min prep
                </span>
                <span th:attr="aria-label='Cook time: ' + ${recipe.cookTime} + ' minutes'">
                    üç≥ <span th:text="${recipe.cookTime != null ? recipe.cookTime : 0}">0</span> min cook
                </span>
            </div>
            
            <!-- Recipe Description -->
            <div class="recipe-card-description" 
                 th:if="${recipe.description != null and !recipe.description.isEmpty()}"
                 th:text="${recipe.description}">
                Recipe description goes here
            </div>
            <div class="recipe-card-description" 
                 th:unless="${recipe.description != null and !recipe.description.isEmpty()}">
                No description available
            </div>
            
            <!-- Recipe Footer with Servings and Difficulty -->
            <div class="recipe-card-footer">
                <span class="recipe-card-servings" 
                      th:attr="aria-label='Serves ' + ${recipe.servings} + ' people'">
                    üçΩÔ∏è Serves <span th:text="${recipe.servings != null ? recipe.servings : 0}">0</span>
                </span>
                <span class="recipe-card-difficulty" 
                      th:if="${recipe.difficultyLevel != null and !recipe.difficultyLevel.isEmpty()}"
                      th:classappend="${recipe.difficultyLevel != null ? recipe.difficultyLevel.toLowerCase() : ''}"
                      th:text="${recipe.difficultyLevel}"
                      th:attr="aria-label='Difficulty level: ' + ${recipe.difficultyLevel}">
                    Difficulty
                </span>
            </div>
            
            <!-- View Recipe Link -->
            <a th:href="@{/recipes/{id}(id=${recipe.id})}" 
               class="recipe-card-view-link"
               th:attr="aria-label='View full recipe for ' + ${recipe.name}">
                View Recipe
            </a>
        </div>
    </div>
</body>
</html>
